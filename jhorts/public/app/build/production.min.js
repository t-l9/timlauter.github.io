angular.module("forecastCtrl",["weatherService"]).controller("forecastController",["$http","$scope","Weather",function(a,b,c){function d(a){b.initialize(a)}function e(a){parseInt(a),50>=a&&(b.message="Save'em for another day."),a>50&&60>=a&&(b.message="It's still a bit cold"),a>60&&70>=a&&(b.message="It needs to be warmer."),a>70&&80>=a&&(b.message="It's warm, you know what to do."),a>80&&90>=a&&(b.message="It's perfect. Get those jhorts."),a>90&&100>=a&&(b.message="Jhorts? It's bathing suit weather."),a>=100&&(b.message="Get the jhorts and the tank")}function f(a){var b=a.coords,c=new google.maps.Geocoder,e=b.latitude,f=b.longitude,g=new google.maps.LatLng(e,f);c&&c.geocode({latLng:g},function(a,b){b==google.maps.GeocoderStatus.OK?a[1]?(currentLocation=a[1].address_components[1].long_name+", "+a[1].address_components[2].short_name,d(currentLocation)):alert("No results found"):alert("Our geolocation failed due to: "+b)})}function g(a){preloader.style.display="none",b.error="Ahh shoot, we couldn't find you. Try entering your location.",b.$apply()}b.initialize=function(a,d){var f=document.getElementById("preloader"),g=document.getElementById("temp");c.init(a).success(function(a){if(f.style.display="none",null===a.query.results)b.error="Bummer, we don't know where that is. Sounds great though.",b.location=void 0,b.temp=void 0,b.description=void 0,b.message=void 0,g.style.visibility="hidden";else{var c=a.query.results.channel.location.city,d=", "+a.query.results.channel.location.region;b.location=c+d,b.temp=a.query.results.channel.item.condition.temp,b.description=a.query.results.channel.item.condition.text,b.error=void 0,e(b.temp),g.style.visibility="visible"}}).error(function(a){f.style.display="none",b.error="Ahh shoot, we are encountering some technical difficulties."}),d&&d.preventDefault()};var h={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(f,g,h)}]),angular.module("weatherService",[]).factory("Weather",["$http",function(a){return{init:function(b){return b.city&&(b=b.city),b=b.replace(/\s/g,""),a.get("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22"+b+"%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys")}}}]),angular.module("app.routes",["ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/views/templates/main.html"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("mainApp",["weatherService","forecastCtrl","app.routes"]);